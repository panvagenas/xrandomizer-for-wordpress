ace.define("ace/occur",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(j,m,d){function k(){}var b=j("./lib/oop"),g=j("./range").Range,p=j("./search").Search,c=j("./edit_session").EditSession,l=j("./search_highlight").SearchHighlight;b.inherits(k,p),function(){this.enter=function(i,a){if(!a.needle){return !1}var o=i.getCursorPosition();this.displayOccurContent(i,a);var f=this.originalToOccurPosition(i.session,o);return i.moveCursorToPosition(f),!0},this.exit=function(i,a){var o=a.translatePosition&&i.getCursorPosition(),f=o&&this.occurToOriginalPosition(i.session,o);return this.displayOriginalContent(i),f&&i.moveCursorToPosition(f),!0},this.highlight=function(f,a){var i=f.$occurHighlight=f.$occurHighlight||f.addDynamicMarker(new l(null,"ace_occur-highlight","text"));i.setRegexp(a),f._emit("changeBackMarker")},this.displayOccurContent=function(q,f){this.$originalSession=q.session;var s=this.matchingLines(q.session,f),o=s.map(function(i){return i.content}),a=new c(o.join("\n"));a.$occur=this,a.$occurMatchingLines=s,q.setSession(a),this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart,a.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart,this.highlight(a,f.re),a._emit("changeBackMarker")},this.displayOriginalContent=function(a){a.setSession(this.$originalSession),this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart},this.originalToOccurPosition=function(q,f){var s=q.$occurMatchingLines,o={row:0,column:0};if(!s){return o}for(var a=0;a<s.length;a++){if(s[a].row===f.row){return{row:a,column:f.column}}}return o},this.occurToOriginalPosition=function(f,a){var i=f.$occurMatchingLines;return !i||!i[a.row]?a:{row:i[a.row].row,column:a.column}},this.matchingLines=function(f,a){a=b.mixin({},a);if(!f||!a.needle){return[]}var i=new p;return i.set(a),i.findAll(f).reduce(function(o,s){var q=s.start.row,e=o[o.length-1];return e&&e.row===q?o:o.concat({row:q,content:f.getLine(q)})},[])}}.call(k.prototype);var h=j("./lib/dom");h.importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting"),m.Occur=k}),ace.define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(j,m,d){function h(){}var b=j("../config"),g=j("../occur").Occur,p={name:"occur",exec:function(i,a){var o=!!i.session.$occur,f=(new g).enter(i,a);f&&!o&&h.installIn(i)},readOnly:!0},c=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(f){var a=f.session.$occur;if(!a){return}a.exit(f,{}),f.session.$occur||h.uninstallFrom(f)},readOnly:!0},{name:"occuraccept",bindKey:"enter",exec:function(f){var a=f.session.$occur;if(!a){return}a.exit(f,{translatePosition:!0}),f.session.$occur||h.uninstallFrom(f)},readOnly:!0}],l=j("../keyboard/hash_handler").HashHandler,k=j("../lib/oop");k.inherits(h,l),function(){this.isOccurHandler=!0,this.attach=function(f){l.call(this,c,f.commands.platform),this.$editor=f};var a=this.handleKeyboard;this.handleKeyboard=function(f,u,q,e){var o=a.call(this,f,u,q,e);return o&&o.command?o:undefined}}.call(h.prototype),h.installIn=function(f){var a=new this;f.keyBinding.addKeyboardHandler(a),f.commands.addCommands(c)},h.uninstallFrom=function(f){f.commands.removeCommands(c);var a=f.getKeyboardHandler();a.isOccurHandler&&f.keyBinding.removeKeyboardHandler(a)},m.occurStartCommand=p}),ace.define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(g,c,j){function a(i){this.$iSearch=i}var f=g("../config"),b=g("../lib/oop"),d=g("../keyboard/hash_handler").HashHandler,h=g("./occur_commands").occurStartCommand;c.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(k,i){f.loadModule(["core","ace/incremental_search"],function(l){var e=l.iSearch=l.iSearch||new l.IncrementalSearch;e.activate(k,i.backwards),i.jumpToFirstMatch&&e.next(i)})},readOnly:!0},{name:"iSearchBackwards",exec:function(k,i){k.execCommand("iSearch",{backwards:!0})},readOnly:!0},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(k,i){k.execCommand("iSearch",{jumpToFirstMatch:!0,useCurrentOrPrevSearch:!0})},readOnly:!0},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(i){i.execCommand("iSearch",{jumpToFirstMatch:!0,backwards:!0,useCurrentOrPrevSearch:!0})},readOnly:!0}],c.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(i){i.cancelSearch(!0)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(k,i){i.useCurrentOrPrevSearch=!0,k.next(i)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(k,i){i.useCurrentOrPrevSearch=!0,i.backwards=!0,k.next(i)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"extendSearchTerm",exec:function(k,i){k.addString(i)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"extendSearchTermSpace",bindKey:"space",exec:function(i){i.addString(" ")},readOnly:!0,isIncrementalSearchCommand:!0},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(i){i.removeChar()},readOnly:!0,isIncrementalSearchCommand:!0},{name:"confirmSearch",bindKey:"return",exec:function(i){i.deactivate()},readOnly:!0,isIncrementalSearchCommand:!0},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(i){i.deactivate(!0)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(k){var i=b.mixin({},k.$options);k.deactivate(),h.exec(k.$editor,i)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(l){var i=l.$editor,m=i.selection.getRangeOfMovements(function(n){n.moveCursorWordRight()}),k=i.session.getTextRange(m);l.addString(k)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(l){var i=l.$editor,m=i.selection.getRangeOfMovements(function(n){n.moveCursorRight()}),k=i.session.getTextRange(m);l.addString(k)},readOnly:!0,isIncrementalSearchCommand:!0},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(i){i.$editor.execCommand("recenterTopBottom")},readOnly:!0,isIncrementalSearchCommand:!0},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(l){var i=l.$editor,m=i.session.$isearchHighlight,k=m&&m.cache?m.cache.reduce(function(o,n){return o.concat(n?n:[])},[]):[];l.deactivate(!1),k.forEach(i.selection.addRange.bind(i.selection))},readOnly:!0,isIncrementalSearchCommand:!0},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(i){i.convertNeedleToRegExp()},readOnly:!0,isIncrementalSearchCommand:!0}],b.inherits(a,d),function(){this.attach=function(k){var l=this.$iSearch;d.call(this,c.iSearchCommands,k.commands.platform),this.$commandExecHandler=k.commands.addEventListener("exec",function(m){return m.command.isIncrementalSearchCommand?(m.stopPropagation(),m.preventDefault(),m.command.exec(l,m.args||{})):undefined})},this.detach=function(k){if(!this.$commandExecHandler){return}k.commands.removeEventListener("exec",this.$commandExecHandler),delete this.$commandExecHandler};var i=this.handleKeyboard;this.handleKeyboard=function(k,q,m,e){if((q===1||q===8)&&m==="v"||q===1&&m==="y"){return null}var l=i.call(this,k,q,m,e);if(l.command){return l}if(q==-1){var p=this.commands.extendSearchTerm;if(p){return{command:p,args:m}}}return{command:"null",passEvent:q==0||q==4}}}.call(a.prototype),c.IncrementalSearchKeyboardHandler=a}),ace.define("ace/incremental_search",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(A,G,k){function z(){this.$options={wrap:!1,skipCurrent:!1},this.$keyboardHandler=new D(this)}function w(a){return a instanceof RegExp}function C(d){var a=String(d),f=a.indexOf("/"),c=a.lastIndexOf("/");return{expression:a.slice(f+1,c),flags:a.slice(c+1)}}function y(c,a){try{return new RegExp(c,a)}catch(d){return c}}function g(a){return y(a.expression,a.flags)}var b=A("./lib/oop"),x=A("./range").Range,H=A("./search").Search,j=A("./search_highlight").SearchHighlight,F=A("./commands/incremental_search_commands"),D=F.IncrementalSearchKeyboardHandler;b.inherits(z,H),function(){this.activate=function(c,a){this.$editor=c,this.$startPos=this.$currentPos=c.getCursorPosition(),this.$options.needle="",this.$options.backwards=a,c.keyBinding.addKeyboardHandler(this.$keyboardHandler),this.$originalEditorOnPaste=c.onPaste,c.onPaste=this.onPaste.bind(this),this.$mousedownHandler=c.addEventListener("mousedown",this.onMouseDown.bind(this)),this.selectionFix(c),this.statusMessage(!0)},this.deactivate=function(c){this.cancelSearch(c);var a=this.$editor;a.keyBinding.removeKeyboardHandler(this.$keyboardHandler),this.$mousedownHandler&&(a.removeEventListener("mousedown",this.$mousedownHandler),delete this.$mousedownHandler),a.onPaste=this.$originalEditorOnPaste,this.message("")},this.selectionFix=function(a){a.selection.isEmpty()&&!a.session.$emacsMark&&a.clearSelection()},this.highlight=function(c){var a=this.$editor.session,d=a.$isearchHighlight=a.$isearchHighlight||a.addDynamicMarker(new j(null,"ace_isearch-result","text"));d.setRegexp(c),a._emit("changeBackMarker")},this.cancelSearch=function(c){var a=this.$editor;return this.$prevNeedle=this.$options.needle,this.$options.needle="",c?(a.moveCursorToPosition(this.$startPos),this.$currentPos=this.$startPos):a.pushEmacsMark&&a.pushEmacsMark(this.$startPos,!1),this.highlight(null),x.fromPoints(this.$currentPos,this.$currentPos)},this.highlightAndFindWithNeedle=function(f,a){if(!this.$editor){return null}var i=this.$options;a&&(i.needle=a.call(this,i.needle||"")||"");if(i.needle.length===0){return this.statusMessage(!0),this.cancelSearch(!0)}i.start=this.$currentPos;var d=this.$editor.session,c=this.find(d),h=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();return c&&(i.backwards&&(c=x.fromPoints(c.end,c.start)),this.$editor.selection.setRange(x.fromPoints(h?this.$startPos:c.end,c.end)),f&&(this.$currentPos=c.end),this.highlight(i.re)),this.statusMessage(c),c},this.addString=function(a){return this.highlightAndFindWithNeedle(!1,function(c){if(!w(c)){return c+a}var d=C(c);return d.expression+=a,g(d)})},this.removeChar=function(a){return this.highlightAndFindWithNeedle(!1,function(d){if(!w(d)){return d.substring(0,d.length-1)}var c=C(d);return c.expression=c.expression.substring(0,c.expression.length-1),g(c)})},this.next=function(a){return a=a||{},this.$options.backwards=!!a.backwards,this.$currentPos=this.$editor.getCursorPosition(),this.highlightAndFindWithNeedle(!0,function(c){return a.useCurrentOrPrevSearch&&c.length===0?this.$prevNeedle||"":c})},this.onMouseDown=function(a){return this.deactivate(),!0},this.onPaste=function(a){this.addString(a)},this.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(!1,function(a){return w(a)?a:y(a,"ig")})},this.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(!1,function(a){return w(a)?C(a).expression:a})},this.statusMessage=function(c){var a=this.$options,d="";d+=a.backwards?"reverse-":"",d+="isearch: "+a.needle,d+=c?"":" (not found)",this.message(d)},this.message=function(a){this.$editor.showCommandLine?(this.$editor.showCommandLine(a),this.$editor.focus()):console.log(a)}}.call(z.prototype),G.IncrementalSearch=z;var B=A("./lib/dom");B.importCssString&&B.importCssString(".ace_marker-layer .ace_isearch-result {  position: absolute;  z-index: 6;  -moz-box-sizing: border-box;  -webkit-box-sizing: border-box;  box-sizing: border-box;}div.ace_isearch-result {  border-radius: 4px;  background-color: rgba(255, 200, 0, 0.5);  box-shadow: 0 0 4px rgb(255, 200, 0);}.ace_dark div.ace_isearch-result {  background-color: rgb(100, 110, 160);  box-shadow: 0 0 4px rgb(80, 90, 140);}","incremental-search-highlighting");var E=A("./commands/command_manager");(function(){this.setupIncrementalSearch=function(d,a){if(this.usesIncrementalSearch==a){return}this.usesIncrementalSearch=a;var f=F.iSearchStartCommands,c=a?"addCommands":"removeCommands";this[c](f)}}).call(E.CommandManager.prototype);var q=A("./editor").Editor;A("./config").defineOptions(q.prototype,"editor",{useIncrementalSearch:{set:function(a){this.keyBinding.$handlers.forEach(function(c){c.setupIncrementalSearch&&c.setupIncrementalSearch(this,a)}),this._emit("incrementalSearchSettingChanged",{isEnabled:a})}}})}),ace.define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(y,E,k){var b=y("../lib/dom");y("../incremental_search");var q=y("../commands/incremental_search_commands"),F=function(f,c){var h=this.scroller.getBoundingClientRect(),d=Math.floor((f+this.scrollLeft-h.left-this.$padding)/this.characterWidth),a=Math.floor((c+this.scrollTop-h.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,d)},j=y("./hash_handler").HashHandler;E.handler=new j,E.handler.isEmacs=!0,E.handler.$id="ace/keyboard/emacs";var D=!1,B,x;E.handler.attach=function(a){D||(D=!0,b.importCssString("            .emacs-mode .ace_cursor{                border: 1px rgba(50,250,50,0.8) solid!important;                -moz-box-sizing: border-box!important;                -webkit-box-sizing: border-box!important;                box-sizing: border-box!important;                background-color: rgba(0,250,0,0.9);                opacity: 0.5;            }            .emacs-mode .ace_hidden-cursors .ace_cursor{                opacity: 1;                background-color: transparent;            }            .emacs-mode .ace_overwrite-cursors .ace_cursor {                opacity: 1;                background-color: transparent;                border-width: 0 0 2px 2px !important;            }            .emacs-mode .ace_text-layer {                z-index: 4            }            .emacs-mode .ace_cursor-layer {                z-index: 2            }","emacsMode")),B=a.session.$selectLongWords,a.session.$selectLongWords=!0,x=a.session.$useEmacsStyleLineStart,a.session.$useEmacsStyleLineStart=!0,a.session.$emacsMark=null,a.session.$emacsMarkRing=a.session.$emacsMarkRing||[],a.emacsMark=function(){return this.session.$emacsMark},a.setEmacsMark=function(c){this.session.$emacsMark=c},a.pushEmacsMark=function(d,c){var f=this.session.$emacsMark;f&&this.session.$emacsMarkRing.push(f),!d||c?this.setEmacsMark(d):this.session.$emacsMarkRing.push(d)},a.popEmacsMark=function(){var c=this.emacsMark();return c?(this.setEmacsMark(null),c):this.session.$emacsMarkRing.pop()},a.getLastEmacsMark=function(c){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0]},a.emacsMarkForSelection=function(l){var d=this.selection,u=this.multiSelect?this.multiSelect.getAllRanges().length:1,h=d.index||0,c=this.session.$emacsMarkRing,f=c.length-(u-h),p=c[f]||d.anchor;return l&&c.splice(f,1,"row" in l&&"column" in l?l:undefined),p},a.on("click",A),a.on("changeSession",m),a.renderer.screenToTextCoordinates=F,a.setStyle("emacs-mode"),a.commands.addCommands(C),E.handler.platform=a.commands.platform,a.$emacsModeHandler=this,a.addEventListener("copy",this.onCopy),a.addEventListener("paste",this.onPaste)},E.handler.detach=function(a){delete a.renderer.screenToTextCoordinates,a.session.$selectLongWords=B,a.session.$useEmacsStyleLineStart=x,a.removeEventListener("click",A),a.removeEventListener("changeSession",m),a.unsetStyle("emacs-mode"),a.commands.removeCommands(C),a.removeEventListener("copy",this.onCopy),a.removeEventListener("paste",this.onPaste),a.$emacsModeHandler=null};var m=function(a){a.oldSession&&(a.oldSession.$selectLongWords=B,a.oldSession.$useEmacsStyleLineStart=x),B=a.session.$selectLongWords,a.session.$selectLongWords=!0,x=a.session.$useEmacsStyleLineStart,a.session.$useEmacsStyleLineStart=!0,a.session.hasOwnProperty("$emacsMark")||(a.session.$emacsMark=null),a.session.hasOwnProperty("$emacsMarkRing")||(a.session.$emacsMarkRing=[])},A=function(a){a.editor.session.$emacsMark=null},w=y("../lib/keys").KEY_MODS,g={C:"ctrl",S:"shift",M:"alt",CMD:"command"},z=["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"];z.forEach(function(c){var a=0;c.split("-").forEach(function(d){a|=w[g[d]]}),g[a]=c.toLowerCase()+"-"}),E.handler.onCopy=function(a,c){if(c.$handlesEmacsOnCopy){return}c.$handlesEmacsOnCopy=!0,E.handler.commands.killRingSave.exec(c),c.$handlesEmacsOnCopy=!1},E.handler.onPaste=function(c,a){a.pushEmacsMark(a.getCursorPosition())},E.handler.bindKey=function(c,a){typeof c=="object"&&(c=c[this.platform]);if(!c){return}var d=this.commandKeyBinding;c.split("|").forEach(function(h){h=h.toLowerCase(),d[h]=a;var f=h.split(" ").slice(0,-1);f.reduce(function(o,i,p){var l=o[p-1]?o[p-1]+" ":"";return o.concat([l+i])},[]).forEach(function(i){d[i]||(d[i]="null")})},this)},E.handler.getStatusText=function(c,a){var d="";return a.count&&(d+=a.count),a.keyChain&&(d+=" "+a.keyChain),d},E.handler.handleKeyboard=function(v,I,h,c){if(c===-1){return undefined}var l=v.editor;l._signal("changeStatus");if(I==-1){l.pushEmacsMark();if(v.count){var J=(new Array(v.count+1)).join(h);return v.count=null,{command:"insertstring",args:J}}}var d=g[I];if(d=="c-"||v.count){var H=parseInt(h[h.length-1]);if(typeof H=="number"&&!isNaN(H)){return v.count=Math.max(v.count,0)||0,v.count=10*v.count+H,{command:"null"}}}d&&(h=d+h),v.keyChain&&(h=v.keyChain+=" "+h);var G=this.commandKeyBinding[h];v.keyChain=G=="null"?h:"";if(!G){return undefined}if(G==="null"){return{command:"null"}}if(G==="universalArgument"){return v.count=-4,{command:"null"}}var p;typeof G!="string"&&(p=G.args,G.command&&(G=G.command),G==="goorselect"&&(G=l.emacsMark()?p[1]:p[0],p=null));if(typeof G=="string"){(G==="insertstring"||G==="splitline"||G==="togglecomment")&&l.pushEmacsMark(),G=this.commands[G]||l.commands.commands[G];if(!G){return undefined}}!G.readOnly&&!G.isYank&&(v.lastCommand=null),!G.readOnly&&l.emacsMark()&&l.setEmacsMark(null);if(v.count){var H=v.count;v.count=0;if(!G||!G.handlesCount){return{args:p,command:{exec:function(f,a){for(var i=0;i<H;i++){G.exec(f,a)}},multiSelectAction:G.multiSelectAction}}}p||(p={}),typeof p=="object"&&(p.count=H)}return{command:G,args:p}},E.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:"\n"},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}},E.handler.bindKeys(E.emacsKeys),E.handler.addCommands({recenterTopBottom:function(f){var c=f.renderer,h=c.$cursorLayer.getPixelPosition(),d=c.$size.scrollerHeight-c.lineHeight,a=c.scrollTop;Math.abs(h.top-a)<2?a=h.top-d:Math.abs(h.top-a-d*0.5)<2?a=h.top:a=h.top-d*0.5,f.session.setScrollTop(a)},selectRectangularRegion:function(a){a.multiSelect.toggleBlockSelection()},setMark:{exec:function(l,d){function a(){var e=l.popEmacsMark();e&&l.moveCursorToPosition(e)}if(d&&d.count){l.inMultiSelectMode?l.forEachSelection(a):a(),a();return}var v=l.emacsMark(),h=l.selection.getAllRanges(),c=h.map(function(i){return{row:i.start.row,column:i.start.column}}),f=!0,p=h.every(function(i){return i.isEmpty()});if(f&&(v||!p)){l.inMultiSelectMode?l.forEachSelection({exec:l.clearSelection.bind(l)}):l.clearSelection(),v&&l.pushEmacsMark(null);return}if(!v){c.forEach(function(e){l.pushEmacsMark(e)}),l.setEmacsMark(c[c.length-1]);return}},readOnly:!0,handlesCount:!0},exchangePointAndMark:{exec:function(c,e){var d=c.selection;if(!e.count&&!d.isEmpty()){d.setSelectionRange(d.getRange(),!d.isBackwards());return}if(e.count){var a={row:d.lead.row,column:d.lead.column};d.clearSelection(),d.moveCursorToPosition(c.emacsMarkForSelection(a))}else{d.selectToPosition(c.emacsMarkForSelection())}},readOnly:!0,handlesCount:!0,multiSelectAction:"forEach"},killWord:{exec:function(d,f){d.clearSelection(),f=="left"?d.selection.selectWordLeft():d.selection.selectWordRight();var c=d.getSelectionRange(),a=d.session.getTextRange(c);E.killRing.add(a),d.session.remove(c),d.clearSelection()},multiSelectAction:"forEach"},killLine:function(d){d.pushEmacsMark(null);var f=d.getCursorPosition();f.column===0&&d.session.doc.getLine(f.row).length===0?d.selection.selectLine():(d.clearSelection(),d.selection.selectLineEnd());var c=d.getSelectionRange(),a=d.session.getTextRange(c);E.killRing.add(a),d.session.remove(c),d.clearSelection()},yank:function(a){a.onPaste(E.killRing.get()||""),a.keyBinding.$data.lastCommand="yank"},yankRotate:function(a){if(a.keyBinding.$data.lastCommand!="yank"){return}a.undo(),a.session.$emacsMarkRing.pop(),a.onPaste(E.killRing.rotate()),a.keyBinding.$data.lastCommand="yank"},killRegion:{exec:function(a){E.killRing.add(a.getCopyText()),a.commands.byName.cut.exec(a)},readOnly:!0,multiSelectAction:"forEach"},killRingSave:{exec:function(c){c.$handlesEmacsOnCopy=!0;var d=c.session.$emacsMarkRing.slice(),a=[];E.killRing.add(c.getCopyText()),setTimeout(function(){function e(){var h=c.selection,l=h.getRange(),f=h.isBackwards()?l.end:l.start;a.push({row:f.row,column:f.column}),h.clearSelection()}c.$handlesEmacsOnCopy=!1,c.inMultiSelectMode?c.forEachSelection({exec:e}):e(),c.session.$emacsMarkRing=d.concat(a.reverse())},0)},readOnly:!0},keyboardQuit:function(a){a.selection.clearSelection(),a.setEmacsMark(null),a.keyBinding.$data.count=null},focusCommandLine:function(c,a){c.showCommandLine&&c.showCommandLine(a)}}),E.handler.addCommands(q.iSearchStartCommands);var C=E.handler.commands;C.yank.isYank=!0,C.yankRotate.isYank=!0,E.killRing={$data:[],add:function(a){a&&this.$data.push(a),this.$data.length>30&&this.$data.shift()},get:function(a){return a=a||1,this.$data.slice(this.$data.length-a,this.$data.length).reverse().join("\n")},pop:function(){return this.$data.length>1&&this.$data.pop(),this.get()},rotate:function(){return this.$data.unshift(this.$data.pop()),this.get()}}});