ace.define("ace/mode/lua_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(f,b,g){var d=f("../lib/oop"),a=f("./text_highlight_rules").TextHighlightRules,c=function(){var z="break|do|else|elseif|end|for|function|if|in|local|repeat|return|then|until|while|or|and|not",D="true|false|nil|_G|_VERSION",q="string|xpcall|package|tostring|print|os|unpack|require|getfenv|setmetatable|next|assert|tonumber|io|rawequal|collectgarbage|getmetatable|module|rawset|math|debug|pcall|table|newproxy|type|coroutine|_G|select|gcinfo|pairs|rawget|loadstring|ipairs|_VERSION|dofile|setfenv|load|error|loadfile|sub|upper|len|gfind|rep|find|match|char|dump|gmatch|reverse|byte|format|gsub|lower|preload|loadlib|loaded|loaders|cpath|config|path|seeall|exit|setlocale|date|getenv|difftime|remove|time|clock|tmpname|rename|execute|lines|write|close|flush|open|output|type|read|stderr|stdin|input|stdout|popen|tmpfile|log|max|acos|huge|ldexp|pi|cos|tanh|pow|deg|tan|cosh|sinh|random|randomseed|frexp|ceil|floor|rad|abs|sqrt|modf|asin|min|mod|fmod|log10|atan2|exp|sin|atan|getupvalue|debug|sethook|getmetatable|gethook|setmetatable|setlocal|traceback|setfenv|getinfo|setupvalue|getlocal|getregistry|getfenv|setn|insert|getn|foreachi|maxn|foreach|concat|sort|remove|resume|yield|status|wrap|create|running|__add|__sub|__mod|__unm|__concat|__lt|__index|__call|__gc|__metatable|__mul|__div|__pow|__len|__eq|__le|__newindex|__tostring|__mode|__tonumber",j="string|package|os|io|math|debug|table|coroutine",w="",E="setn|foreach|foreachi|gcinfo|log10|maxn",m=this.createKeywordMapper({keyword:z,"support.function":q,"invalid.deprecated":E,"constant.library":j,"constant.language":D,"invalid.illegal":w,"variable.language":"self"},"identifier"),C="(?:(?:[1-9]\\d*)|(?:0))",B="(?:0[xX][\\dA-Fa-f]+)",y="(?:"+C+"|"+B+")",v="(?:\\.\\d+)",A="(?:\\d+)",x="(?:(?:"+A+"?"+v+")|(?:"+A+"\\.))",k="(?:"+x+")";this.$rules={start:[{stateName:"bracketedComment",onMatch:function(i,h,l){return l.unshift(this.next,i.length-2,h),"comment"},regex:/\-\-\[=*\[/,next:[{onMatch:function(i,h,l){return i.length==l[1]?(l.shift(),l.shift(),this.next=l.shift()):this.next="","comment"},regex:/\]=*\]/,next:"start"},{defaultToken:"comment"}]},{token:"comment",regex:"\\-\\-.*$"},{stateName:"bracketedString",onMatch:function(i,h,l){return l.unshift(this.next,i.length,h),"comment"},regex:/\[=*\[/,next:[{onMatch:function(i,h,l){return i.length==l[1]?(l.shift(),l.shift(),this.next=l.shift()):this.next="","comment"},regex:/\]=*\]/,next:"start"},{defaultToken:"comment"}]},{token:"string",regex:'"(?:[^\\\\]|\\\\.)*?"'},{token:"string",regex:"'(?:[^\\\\]|\\\\.)*?'"},{token:"constant.numeric",regex:k},{token:"constant.numeric",regex:y+"\\b"},{token:m,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\/|%|\\#|\\^|~|<|>|<=|=>|==|~=|=|\\:|\\.\\.\\.|\\.\\."},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:"text",regex:"\\s+|\\w+"}]},this.normalizeRules()};d.inherits(c,a),b.LuaHighlightRules=c}),ace.define("ace/mode/folding/lua",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range","ace/token_iterator"],function(g,c,j){var f=g("../../lib/oop"),b=g("./fold_mode").FoldMode,d=g("../../range").Range,h=g("../../token_iterator").TokenIterator,a=c.FoldMode=function(){};f.inherits(a,b),function(){this.foldingStartMarker=/\b(function|then|do|repeat)\b|{\s*$|(\[=*\[)/,this.foldingStopMarker=/\bend\b|^\s*}|\]=*\]/,this.getFoldWidget=function(v,m,x){var q=v.getLine(x),l=this.foldingStartMarker.test(q),p=this.foldingStopMarker.test(q);if(l&&!p){var w=q.match(this.foldingStartMarker);if(w[1]=="then"&&/\belseif\b/.test(q)){return}if(w[1]){if(v.getTokenAt(x,w.index+1).type==="keyword"){return"start"}}else{if(!w[2]){return"start"}var k=v.bgTokenizer.getState(x)||"";if(k[0]=="bracketedComment"||k[0]=="bracketedString"){return"start"}}}if(m!="markbeginend"||!p||l&&p){return""}var w=q.match(this.foldingStopMarker);if(w[0]==="end"){if(v.getTokenAt(x,w.index+1).type==="keyword"){return"end"}}else{if(w[0][0]!=="]"){return"end"}var k=v.bgTokenizer.getState(x-1)||"";if(k[0]=="bracketedComment"||k[0]=="bracketedString"){return"end"}}},this.getFoldWidgetRange=function(o,l,p){var m=o.doc.getLine(p),k=this.foldingStartMarker.exec(m);if(k){return k[1]?this.luaBlock(o,p,k.index+1):k[2]?o.getCommentFoldRange(p,k.index+1):this.openingBracketBlock(o,"{",p,k.index)}var k=this.foldingStopMarker.exec(m);if(k){return k[0]==="end"&&o.getTokenAt(p,k.index+1).type==="keyword"?this.luaBlock(o,p,k.index+1):k[0][0]==="]"?o.getCommentFoldRange(p,k.index+1):this.closingBracketBlock(o,"}",p,k.index+k[0].length)}},this.luaBlock=function(x,B,o){var k=new h(x,B,o),s={"function":1,"do":1,then:1,elseif:-1,end:-1,repeat:1,until:-1},A=k.getCurrentToken();if(!A||A.type!="keyword"){return}var z=A.value,w=[z],q=s[z];if(!q){return}var y=q===-1?k.getCurrentTokenColumn():x.getLine(B).length,v=B;k.step=q===-1?k.stepBackward:k.stepForward;while(A=k.step()){if(A.type!=="keyword"){continue}var m=q*s[A.value];if(m>0){w.unshift(A.value)}else{if(m<=0){w.shift();if(!w.length&&A.value!="elseif"){break}m===0&&w.unshift(A.value)}}}var B=k.getCurrentTokenRow();return q===-1?new d(B,x.getLine(B).length,v,y):new d(v,y,B,k.getCurrentTokenColumn())}}.call(a.prototype)}),ace.define("ace/mode/lua",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/lua_highlight_rules","ace/mode/folding/lua","ace/range","ace/worker/worker_client"],function(j,m,d){var b=j("../lib/oop"),g=j("./text").Mode,p=j("./lua_highlight_rules").LuaHighlightRules,c=j("./folding/lua").FoldMode,l=j("../range").Range,k=j("../worker/worker_client").WorkerClient,h=function(){this.HighlightRules=p,this.foldingRules=new c};b.inherits(h,g),function(){function i(o){var s=0;for(var q=0;q<o.length;q++){var e=o[q];e.type=="keyword"?e.value in f&&(s+=f[e.value]):e.type=="paren.lparen"?s++:e.type=="paren.rparen"&&s--}return s<0?-1:s>0?1:0}this.lineCommentStart="--",this.blockComment={start:"--[",end:"]--"};var f={"function":1,then:1,"do":1,"else":1,elseif:1,repeat:1,end:-1,until:-1},a=["else","elseif","end","until"];this.getNextLineIndent=function(y,v,x){var q=this.$getIndent(v),w=0,z=this.getTokenizer().getLineTokens(v,y),n=z.tokens;return y=="start"&&(w=i(n)),w>0?q+x:w<0&&q.substr(q.length-x.length)==x&&!this.checkOutdent(y,v,"\n")?q.substr(0,q.length-x.length):q},this.checkOutdent=function(s,t,q){if(q!="\n"&&q!="\r"&&q!="\r\n"){return !1}if(t.match(/^\s*[\)\}\]]$/)){return !0}var o=this.getTokenizer().getLineTokens(t.trim(),s).tokens;return !o||!o.length?!1:o[0].type=="keyword"&&a.indexOf(o[0].value)!=-1},this.autoOutdent=function(x,z,n){var v=z.getLine(n-1),A=this.$getIndent(v).length,q=this.getTokenizer().getLineTokens(v,"start").tokens,y=z.getTabString().length,w=A+y*i(q),u=this.$getIndent(z.getLine(n)).length;if(u<w){return}z.outdentRows(new l(n,0,n+2,0))},this.createWorker=function(o){var n=new k(["ace"],"ace/mode/lua_worker","Worker");return n.attachToDocument(o.getDocument()),n.on("error",function(e){o.setAnnotations([e.data])}),n.on("ok",function(e){o.clearAnnotations()}),n},this.$id="ace/mode/lua"}.call(h.prototype),m.Mode=h});