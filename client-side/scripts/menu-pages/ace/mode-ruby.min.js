ace.define("ace/mode/ruby_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(m,w,g){var b=m("../lib/oop"),j=m("./text_highlight_rules").TextHighlightRules,x=w.constantOtherSymbol={token:"constant.other.symbol.ruby",regex:"[:](?:[A-Za-z_]|[@$](?=[a-zA-Z0-9_]))[a-zA-Z0-9_]*[!=?]?"},d=w.qString={token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},v=w.qqString={token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},q=w.tString={token:"string",regex:"[`](?:(?:\\\\.)|(?:[^'\\\\]))*?[`]"},k=w.constantNumericHex={token:"constant.numeric",regex:"0[xX][0-9a-fA-F](?:[0-9a-fA-F]|_(?=[0-9a-fA-F]))*\\b"},h=w.constantNumericFloat={token:"constant.numeric",regex:"[+-]?\\d(?:\\d|_(?=\\d))*(?:(?:\\.\\d(?:\\d|_(?=\\d))*)?(?:[eE][+-]?\\d+)?)?\\b"},p=function(){var l="abort|Array|assert|assert_equal|assert_not_equal|assert_same|assert_not_same|assert_nil|assert_not_nil|assert_match|assert_no_match|assert_in_delta|assert_throws|assert_raise|assert_nothing_raised|assert_instance_of|assert_kind_of|assert_respond_to|assert_operator|assert_send|assert_difference|assert_no_difference|assert_recognizes|assert_generates|assert_response|assert_redirected_to|assert_template|assert_select|assert_select_email|assert_select_rjs|assert_select_encoded|css_select|at_exit|attr|attr_writer|attr_reader|attr_accessor|attr_accessible|autoload|binding|block_given?|callcc|caller|catch|chomp|chomp!|chop|chop!|defined?|delete_via_redirect|eval|exec|exit|exit!|fail|Float|flunk|follow_redirect!|fork|form_for|form_tag|format|gets|global_variables|gsub|gsub!|get_via_redirect|host!|https?|https!|include|Integer|lambda|link_to|link_to_unless_current|link_to_function|link_to_remote|load|local_variables|loop|open|open_session|p|print|printf|proc|putc|puts|post_via_redirect|put_via_redirect|raise|rand|raw|readline|readlines|redirect?|request_via_redirect|require|scan|select|set_trace_func|sleep|split|sprintf|srand|String|stylesheet_link_tag|syscall|system|sub|sub!|test|throw|trace_var|trap|untrace_var|atan2|cos|exp|frexp|ldexp|log|log10|sin|sqrt|tan|render|javascript_include_tag|csrf_meta_tag|label_tag|text_field_tag|submit_tag|check_box_tag|content_tag|radio_button_tag|text_area_tag|password_field_tag|hidden_field_tag|fields_for|select_tag|options_for_select|options_from_collection_for_select|collection_select|time_zone_select|select_date|select_time|select_datetime|date_select|time_select|datetime_select|select_year|select_month|select_day|select_hour|select_minute|select_second|file_field_tag|file_field|respond_to|skip_before_filter|around_filter|after_filter|verify|protect_from_forgery|rescue_from|helper_method|redirect_to|before_filter|send_data|send_file|validates_presence_of|validates_uniqueness_of|validates_length_of|validates_format_of|validates_acceptance_of|validates_associated|validates_exclusion_of|validates_inclusion_of|validates_numericality_of|validates_with|validates_each|authenticate_or_request_with_http_basic|authenticate_or_request_with_http_digest|filter_parameter_logging|match|get|post|resources|redirect|scope|assert_routing|translate|localize|extract_locale_from_tld|caches_page|expire_page|caches_action|expire_action|cache|expire_fragment|expire_cache_for|observe|cache_sweeper|has_many|has_one|belongs_to|has_and_belongs_to_many",c="alias|and|BEGIN|begin|break|case|class|def|defined|do|else|elsif|END|end|ensure|__FILE__|finally|for|gem|if|in|__LINE__|module|next|not|or|private|protected|public|redo|rescue|retry|return|super|then|undef|unless|until|when|while|yield",o="true|TRUE|false|FALSE|nil|NIL|ARGF|ARGV|DATA|ENV|RUBY_PLATFORM|RUBY_RELEASE_DATE|RUBY_VERSION|STDERR|STDIN|STDOUT|TOPLEVEL_BINDING",f="$DEBUG|$defout|$FILENAME|$LOAD_PATH|$SAFE|$stdin|$stdout|$stderr|$VERBOSE|$!|root_url|flash|session|cookies|params|request|response|logger|self",a=this.$keywords=this.createKeywordMapper({keyword:c,"constant.language":o,"variable.language":f,"support.function":l,"invalid.deprecated":"debugger"},"identifier");this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"comment",regex:"^=begin(?:$|\\s.*$)",next:"comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},[{regex:"[{}]",onMatch:function(r,i,s){this.next=r=="{"?this.nextState:"";if(r=="{"&&s.length){return s.unshift("start",i),"paren.lparen"}if(r=="}"&&s.length){s.shift(),this.next=s.shift();if(this.next.indexOf("string")!=-1){return"paren.end"}}return r=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.start",regex:/"/,push:[{token:"constant.language.escape",regex:/\\(?:[nsrtvfbae'"\\]|c.|C-.|M-.(?:\\C-.)?|[0-7]{3}|x[\da-fA-F]{2}|u[\da-fA-F]{4})/},{token:"paren.start",regex:/\#{/,push:"start"},{token:"string.end",regex:/"/,next:"pop"},{defaultToken:"string"}]},{token:"string.start",regex:/`/,push:[{token:"constant.language.escape",regex:/\\(?:[nsrtvfbae'"\\]|c.|C-.|M-.(?:\\C-.)?|[0-7]{3}|x[\da-fA-F]{2}|u[\da-fA-F]{4})/},{token:"paren.start",regex:/\#{/,push:"start"},{token:"string.end",regex:/`/,next:"pop"},{defaultToken:"string"}]},{token:"string.start",regex:/'/,push:[{token:"constant.language.escape",regex:/\\['\\]/},{token:"string.end",regex:/'/,next:"pop"},{defaultToken:"string"}]}],{token:"text",regex:"::"},{token:"variable.instance",regex:"@{1,2}[a-zA-Z_\\d]+"},{token:"support.class",regex:"[A-Z][a-zA-Z_\\d]+"},x,k,h,{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:a,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"punctuation.separator.key-value",regex:"=>"},{stateName:"heredoc",onMatch:function(z,u,A){var y=z[2]=="-"?"indentedHeredoc":"heredoc",s=z.split(this.splitRegex);return A.push(y,s[3]),[{type:"constant",value:s[1]},{type:"string",value:s[2]},{type:"support.class",value:s[3]},{type:"string",value:s[4]}]},regex:"(<<-?)(['\"`]?)([\\w]+)(['\"`]?)",rules:{heredoc:[{onMatch:function(r,i,s){return r===s[1]?(s.shift(),s.shift(),this.next=s[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^ +"},{onMatch:function(r,i,s){return r===s[1]?(s.shift(),s.shift(),this.next=s[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(n,i){return i[0]==="heredoc"||i[0]==="indentedHeredoc"?i[0]:n}},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"^=end(?:$|\\s.*$)",next:"start"},{token:"comment",regex:".+"}]},this.normalizeRules()};b.inherits(p,j),w.RubyHighlightRules=p}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(d,b,f){var c=d("../range").Range,a=function(){};(function(){this.checkOutdent=function(h,g){return/^\s+$/.test(h)?/^\s*\}/.test(g):!1},this.autoOutdent=function(l,j){var p=l.getLine(j),h=p.match(/^(\s*\})/);if(!h){return 0}var k=h[1].length,m=l.findMatchingBracket({row:j,column:k});if(!m||m.row==j){return 0}var g=this.$getIndent(l.getLine(m.row));l.replace(new c(j,0,j,k-1),g)},this.$getIndent=function(g){return g.match(/^\s*/)[0]}}).call(a.prototype),b.MatchingBraceOutdent=a}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(q,y,g){var b=q("../../lib/oop"),k=q("../behaviour").Behaviour,z=q("../../token_iterator").TokenIterator,d=q("../../lib/lang"),x=["text","paren.rparen","punctuation.operator"],w=["text","paren.rparen","punctuation.operator","comment"],p,j={},v=function(c){var a=-1;c.multiSelect&&(a=c.selection.index,j.rangeCount!=c.multiSelect.rangeCount&&(j={rangeCount:c.multiSelect.rangeCount}));if(j[a]){return p=j[a]}p=j[a]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},m=function(){this.add("braces","insertion",function(D,J,h,c,B){var K=h.getCursorPosition(),I=c.doc.getLine(K.row);if(B=="{"){v(h);var G=h.getSelectionRange(),A=c.doc.getTextRange(G);if(A!==""&&A!=="{"&&h.getWrapBehavioursEnabled()){return{text:"{"+A+"}",selection:!1}}if(m.isSaneInsertion(h,c)){return/[\]\}\)]/.test(I[K.column])||h.inMultiSelectMode?(m.recordAutoInsert(h,c,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(h,c,"{"),{text:"{",selection:[1,1]})}}else{if(B=="}"){v(h);var f=I.substring(K.column,K.column+1);if(f=="}"){var E=c.$findOpeningBracket("}",{column:K.column+1,row:K.row});if(E!==null&&m.isAutoInsertedClosing(K,I,B)){return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}else{if(B=="\n"||B=="\r\n"){v(h);var H="";m.isMaybeInsertedClosing(K,I)&&(H=d.stringRepeat("}",p.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var f=I.substring(K.column,K.column+1);if(f==="}"){var o=c.findMatchingBracket({row:K.row,column:K.column+1},"}");if(!o){return null}var C=this.$getIndent(c.getLine(o.row))}else{if(!H){m.clearMaybeInsertedClosing();return}var C=this.$getIndent(I)}var F=C+c.getTabString();return{text:"\n"+F+"\n"+C+H,selection:[1,F.length,1,F.length]}}m.clearMaybeInsertedClosing()}}}),this.add("braces","deletion",function(A,f,C,l,c){var h=l.doc.getTextRange(c);if(!c.isMultiLine()&&h=="{"){v(C);var B=l.doc.getLine(c.start.row),a=B.substring(c.end.column,c.end.column+1);if(a=="}"){return c.end.column++,c}p.maybeInsertedBrackets--}}),this.add("parens","insertion",function(E,H,A,c,C){if(C=="("){v(A);var I=A.getSelectionRange(),h=c.doc.getTextRange(I);if(h!==""&&A.getWrapBehavioursEnabled()){return{text:"("+h+")",selection:!1}}if(m.isSaneInsertion(A,c)){return m.recordAutoInsert(A,c,")"),{text:"()",selection:[1,1]}}}else{if(C==")"){v(A);var G=A.getCursorPosition(),F=c.doc.getLine(G.row),D=F.substring(G.column,G.column+1);if(D==")"){var B=c.$findOpeningBracket(")",{column:G.column+1,row:G.row});if(B!==null&&m.isAutoInsertedClosing(G,F,C)){return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}}}),this.add("parens","deletion",function(A,f,C,l,c){var h=l.doc.getTextRange(c);if(!c.isMultiLine()&&h=="("){v(C);var B=l.doc.getLine(c.start.row),a=B.substring(c.start.column+1,c.start.column+2);if(a==")"){return c.end.column++,c}}}),this.add("brackets","insertion",function(E,H,A,c,C){if(C=="["){v(A);var I=A.getSelectionRange(),h=c.doc.getTextRange(I);if(h!==""&&A.getWrapBehavioursEnabled()){return{text:"["+h+"]",selection:!1}}if(m.isSaneInsertion(A,c)){return m.recordAutoInsert(A,c,"]"),{text:"[]",selection:[1,1]}}}else{if(C=="]"){v(A);var G=A.getCursorPosition(),F=c.doc.getLine(G.row),D=F.substring(G.column,G.column+1);if(D=="]"){var B=c.$findOpeningBracket("]",{column:G.column+1,row:G.row});if(B!==null&&m.isAutoInsertedClosing(G,F,C)){return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}}}),this.add("brackets","deletion",function(A,f,C,l,c){var h=l.doc.getTextRange(c);if(!c.isMultiLine()&&h=="["){v(C);var B=l.doc.getLine(c.start.row),a=B.substring(c.start.column+1,c.start.column+2);if(a=="]"){return c.end.column++,c}}}),this.add("string_dquotes","insertion",function(P,D,I,F,L){if(L=='"'||L=="'"){v(I);var E=L,H=I.getSelectionRange(),C=F.doc.getTextRange(H);if(C!==""&&C!=="'"&&C!='"'&&I.getWrapBehavioursEnabled()){return{text:E+C+E,selection:!1}}var S=I.getCursorPosition(),O=F.doc.getLine(S.row),K=O.substring(S.column-1,S.column),M=O.substring(S.column,S.column+1),G=F.getTokenAt(S.row,S.column),Q=F.getTokenAt(S.row,S.column+1);if(K=="\\"&&G&&/escape/.test(G.type)){return null}var B=G&&/string/.test(G.type),J=!Q||/string/.test(Q.type),N;if(M==E){N=B!==J}else{if(B&&!J){return null}if(B&&J){return null}var c=F.$mode.tokenRe;c.lastIndex=0;var R=c.test(K);c.lastIndex=0;var A=c.test(K);if(R||A){return null}if(M&&!/[\s;,.})\]\\]/.test(M)){return null}N=!0}return{text:N?E+E:"",selection:[1,1]}}}),this.add("string_dquotes","deletion",function(A,f,C,l,c){var h=l.doc.getTextRange(c);if(!c.isMultiLine()&&(h=='"'||h=="'")){v(C);var B=l.doc.getLine(c.start.row),a=B.substring(c.start.column+1,c.start.column+2);if(a==h){return c.end.column++,c}}})};m.isSaneInsertion=function(h,c){var l=h.getCursorPosition(),f=new z(c,l.row,l.column);if(!this.$matchTokenType(f.getCurrentToken()||"text",x)){var a=new z(c,l.row,l.column+1);if(!this.$matchTokenType(a.getCurrentToken()||"text",x)){return !1}}return f.stepForward(),f.getCurrentTokenRow()!==l.row||this.$matchTokenType(f.getCurrentToken()||"text",w)},m.$matchTokenType=function(c,a){return a.indexOf(c.type||c)>-1},m.recordAutoInsert=function(h,c,l){var f=h.getCursorPosition(),a=c.doc.getLine(f.row);this.isAutoInsertedClosing(f,a,p.autoInsertedLineEnd[0])||(p.autoInsertedBrackets=0),p.autoInsertedRow=f.row,p.autoInsertedLineEnd=l+a.substr(f.column),p.autoInsertedBrackets++},m.recordMaybeInsert=function(h,c,l){var f=h.getCursorPosition(),a=c.doc.getLine(f.row);this.isMaybeInsertedClosing(f,a)||(p.maybeInsertedBrackets=0),p.maybeInsertedRow=f.row,p.maybeInsertedLineStart=a.substr(0,f.column)+l,p.maybeInsertedLineEnd=a.substr(f.column),p.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(c,a,f){return p.autoInsertedBrackets>0&&c.row===p.autoInsertedRow&&f===p.autoInsertedLineEnd[0]&&a.substr(c.column)===p.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(c,a){return p.maybeInsertedBrackets>0&&c.row===p.maybeInsertedRow&&a.substr(c.column)===p.maybeInsertedLineEnd&&a.substr(0,c.column)==p.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){p.autoInsertedLineEnd=p.autoInsertedLineEnd.substr(1),p.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){p&&(p.maybeInsertedBrackets=0,p.maybeInsertedRow=-1)},b.inherits(m,k),y.CstyleBehaviour=m}),ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(f,b,h){var d=f("../../lib/oop"),a=f("./fold_mode").FoldMode,c=f("../../range").Range,g=b.FoldMode=function(){};d.inherits(g,a),function(){this.getFoldWidgetRange=function(y,C,q){var j=this.indentationBlock(y,q);if(j){return j}var v=/\S/,m=y.getLine(q),B=m.search(v);if(B==-1||m[B]!="#"){return}var A=m.length,x=y.getLength(),s=q,z=q;while(++q<x){m=y.getLine(q);var w=m.search(v);if(w==-1){continue}if(m[w]!="#"){break}z=q}if(z>s){var k=y.getLine(z).length;return new c(s,A,z,k)}},this.getFoldWidget=function(p,w,l){var j=p.getLine(l),m=j.search(/\S/),x=p.getLine(l+1),k=p.getLine(l-1),v=k.search(/\S/),q=x.search(/\S/);if(m==-1){return p.foldWidgets[l-1]=v!=-1&&v<q?"start":"",""}if(v==-1){if(m==q&&j[m]=="#"&&x[m]=="#"){return p.foldWidgets[l-1]="",p.foldWidgets[l+1]="","start"}}else{if(v==m&&j[m]=="#"&&k[m]=="#"&&p.getLine(l-2).search(/\S/)==-1){return p.foldWidgets[l-1]="start",p.foldWidgets[l+1]="",""}}return v!=-1&&v<m?p.foldWidgets[l-1]="start":p.foldWidgets[l-1]="",m<q?"start":""}}.call(g.prototype)}),ace.define("ace/mode/ruby",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/ruby_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/coffee"],function(k,q,d){var b=k("../lib/oop"),h=k("./text").Mode,v=k("./ruby_highlight_rules").RubyHighlightRules,c=k("./matching_brace_outdent").MatchingBraceOutdent,p=k("../range").Range,m=k("./behaviour/cstyle").CstyleBehaviour,j=k("./folding/coffee").FoldMode,g=function(){this.HighlightRules=v,this.$outdent=new c,this.$behaviour=new m,this.foldingRules=new j};b.inherits(g,h),function(){this.lineCommentStart="#",this.getNextLineIndent=function(A,D,x){var l=this.$getIndent(D),y=this.getTokenizer().getLineTokens(D,A),E=y.tokens;if(E.length&&E[E.length-1].type=="comment"){return l}if(A=="start"){var w=D.match(/^.*[\{\(\[]\s*$/),C=D.match(/^\s*(class|def|module)\s.*$/),B=D.match(/.*do(\s*|\s+\|.*\|\s*)$/),z=D.match(/^\s*(if|else)\s*/);if(w||C||B||z){l+=x}}return l},this.checkOutdent=function(f,a,i){return/^\s+(end|else)$/.test(a+i)||this.$outdent.checkOutdent(a,i)},this.autoOutdent=function(y,u,A){var x=u.getLine(A);if(/}/.test(x)){return this.$outdent.autoOutdent(u,A)}var l=this.$getIndent(x),w=u.getLine(A-1),z=this.$getIndent(w),f=u.getTabString();z.length<=l.length&&l.slice(-f.length)==f&&u.remove(new p(A,l.length-f.length,A,l.length))},this.$id="ace/mode/ruby"}.call(g.prototype),q.Mode=g});